Stopwatch
========================

PHP-инструмент, измеряющий время исполнение кода.


Пример
------------------------------------------------------

```php
$stopwatch = new Almasmurad\Stopwatch\Stopwatch();

//... (измеряемый код)

$stopwatch->report();
```

В результате в стандартный поток вывода попадает следующий отчёт:

```
Started at Sat, 27 Jan 2024 06:55:14 +0000
‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾
All time | 0.198s
```

### Вывод отчёта в файл

Если отчёт необходимо вывести в файл, воспользуйтесь методом `reportToFile()`:

```php
$stopwatch = new Almasmurad\Stopwatch\Stopwatch();

//... (измеряемый код)

$stopwatch->reportToFile(__DIR__.'/report.txt');
```
В результате в отчёт будет записан в файл, а в стандартный поток вывода не попадет ничего. Если файл `report.txt` уже существовует, отчёт заменит его содержимое. 

### Доступ к составляющим отчёта

Вместо вывода отчёта в стандартный поток или файл, можно получить доступ к его составляющим: событиям начала и конца работы Stopwatch, а также продолжительности его работы. Для этого воспользуйтесь методом `getReport()`:


```php
$report = $stopwatch->getReport();

$startedAt  = $report->getStartEvent()->getTimestamp();
$finishedAt = $report->getFinishEvent()->getTimestamp();
$elapsed    = $report->getAllTime()->getSeconds();
```

Подробнее об объекте отчета можно почитать в разделе "[Объект отчёта](Report/ReportObject.md)".


Дополнительные возможности
------------------------------------------------------

С помощью методов `start()` и `finish()` можно измерить время работы отдельного участка кода:

```php
$stopwatch = new Almasmurad\Stopwatch\Stopwatch();
//... 
$stopwatch->start();   // запуск измерение

//... (измеряемый код)

$stopwatch->finish();    // остановка измерение
//... 
$stopwatch->report();
```


Планы на будущее
------------------------------------------------------

Stopwatch будет развиваться и обрастать дополнительными функциями. Неполный список планируемых изменений:
- Добавление метода `step()`, с помощью которого можно измерять время каждого этапа изучаемого процесса.
- Добавление возможности измерять не только время, но и пиковое использование памяти.
- Добавление возможности измерять повторяемого процесса, когда методы `start()` и `finish()` вызываются по нескольку раз.


Больше о Stopwatch
------------------------------------------------------

- [Предупреждения и ошибочные ситуации](Notices.md)
- [Объект отчёта](Report/ReportObject.md)
- [Кастомизация работы с отчётом](Report/ReportingCustomization.md)
- [Принципы, по которым создавался Stopwatch](Principles.md)
